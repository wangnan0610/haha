<% layout( 'layout') %>
  <div class="row">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-body">
          <div class="row">
            <div class="col-md-2">
              <button id="add-offer-button" class="btn btn-success" type="button" data-toggle="modal"
                data-target="#offerModal">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
              </button>
            </div>
            <div class="col-md-2">
              <select id="select-nation" class="w100">
                <option value=""></option>
                <% nations.forEach(function(nation) { %>
                  <option value="<%= nation %>">
                    <%=nation %>
                  </option>
                  <% }) %>
              </select>
            </div>
            <div class="col-md-2">
              <select id="select-category" class="w100">
                <option value=""></option>
                <% categories.forEach(function(category) { %>
                  <option value="<%= category %>">
                    <%=category %>
                  </option>
                  <% }) %>
              </select>
            </div>
            <div class="col-md-2">
              <select id="select-network" class="w100">
                <option value=""></option>
                <% networks.forEach(function(network) { %>
                  <option value="<%= network %>">
                    <%=network %>
                  </option>
                  <% }) %>
              </select>
            </div>
            <div class="col-md-2">
              <select id="select-type" class="w100">
                <option value=""></option>
                <% types.forEach(function(type) { %>
                  <option value="<%= type %>">
                    <%=type %>
                  </option>
                  <% }) %>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          Offer List
        </div>
        <div class="panel-body">
          <div class="dataTable_wrapper">
            <table class="table table-striped table-bordered table-hover" id="offer-table">
              <thead>
                <tr>
                  <td>Logo</td>
                  <td>Title</td>
                  <td>Link</td>
                  <td>Nation</td>
                  <td>Category</td>
                  <td>Network</td>
                  <td>Type</td>
                  <td>Operation</td>
                </tr>
              </thead>
              <tbody>
                <% offers.forEach(function(offer) { %>
                  <tr>
                    <td>
                      <img src="<%=offer.logo %>" style="max-height: 100px; max-width: 100px">
                    </td>
                    <td>
                      <%=offer.title %>
                    </td>
                    <td>
                      <%=offer.link %>
                    </td>
                    <td>
                      <%=offer.nation %>
                    </td>
                    <td>
                      <%=offer.category %>
                    </td>
                    <td>
                      <%=offer.network %>
                    </td>
                    <td>
                      <%=offer.type %>
                    </td>
                    <td>
                      <button class="btn btn-primary update-offer-button" data-whatever="<%=JSON.stringify(offer)%>"
                        data-toggle="modal" data-target="#offerModal">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                      </button>
                      <button class="btn btn-danger delete-offer-button" data-id="<%=offer._id%>">
                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                      </button>
                    </td>
                  </tr>
                  <% }) %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <% include ../partial/offerModal.html %>
    </div>
  </div>
